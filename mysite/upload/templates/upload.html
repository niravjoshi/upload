{% extends "base.html" %}

{% block "left" %}
<div class="well well-lg">
{% if success %}
    <div class="alert alert-success">
        <button type="button" class="close" data-dismiss="alert"
            aria-hidden="true">&times;</button>
        You successfully uploaded <b>{{ file_name }}</b> file.
    </div>
{% endif %}
{% if file_exists %}
    <div class="alert alert-danger">
        <button type="button" class="close" data-dismiss="alert"
            aria-hidden="true">&times;</button>
        File <b>{{ file_name }}</b> already exists.
    </div>
{% endif %}


<h4 class="left-block-top">Upload your file.</h4>
{% url "upload" as upload_file %}
<form name="upload" class="form-horizontal left-block-top" enctype="multipart/form-data" 
    action="{{ upload_file }}" method="POST">
    {% csrf_token %}
 <div class="form-group">
    <div class="col-xs-10 mytop">
        <input type="file" id="id_user_file" name="user_file">
            <span class="help-block">{{ form.user_file.errors }}</span>
    </div>
  </div>
  <div class="form-group">
    <div class="col-xs-2">
        <input type="submit" class="btn btn-success" value="Upload">
    </div>
  </div>
</form>
</div>
{% endblock %}

{% block "right" %}
<div class="col-xs-10 well well-lg">
{% if del_success %}
    <div class="alert alert-success">
        <button type="button" class="close" data-dismiss="alert"
            aria-hidden="true">&times;</button>
        File <b>{{ file_delete }}</b> deleted successfully.
    </div>
{% endif %}
<h4>Your uploaded file list</h4>
    <table class="table table-hover">
        {% if files %}
        <thead>
            <tr>
                <th> </th>
                <th>File</th>
                <th colspan="2">Action</th>
            </tr>
        </thead>
        {% endif %}
        <tbody>
            {% for file in files %}
            <tr>
                <td>{{forloop.counter}} </td>
                <td><a href="/upload/{{file.id}}" toggle="tooltip" 
                        title="Click to download">{{ file.file_name}}</a></td>
                <td><a href="/upload/delete/{{file.id}}" data-toggle="tooltip" title="Delete file"
                        <span class="glyphicon glyphicon-trash delete-file"></span></a></td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">No file(s) uploaded yet ... </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
